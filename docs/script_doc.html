---

title: Console Scripts


keywords: fastai
sidebar: home_sidebar



nb_path: "nbs/01_script_doc.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/01_script_doc.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>These can all be run from the command line / terminal:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ellipse_editor" class="doc_header"><code>ellipse_editor</code><a href="https://github.com/drscotthawley/espiownage/tree/master/espiownage/ellipse_editor.py#L544" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ellipse_editor</code>(<strong><code>seq</code></strong>:"Ignore top-loss ordering and do sequential ordering", <strong><code>files</code></strong>:"Wildcard name for all CSV files to edit"=<em>`'annotations/</em>.csv'<code>*, **</code>imgbank<code>**:"Directory where all the (unlabeled) images are"=*</code>'images/'<code>*, **</code>tldir<code>**:"Directory where 'top losses' info is stored'"=*</code>'top_losses/'`*)</p>
</blockquote>
<p><strong>Parameters:</strong></p>
<ul>
<li><p><strong><code>seq</code></strong> : <em><code>&lt;Ignore top-loss ordering and do sequential ordering&gt;</code></em></p>
</li>
<li><p><strong><code>files</code></strong> : <em><code>str &lt;Wildcard name for all CSV files to edit&gt;</code></em>, <em>optional</em></p>
</li>
<li><p><strong><code>imgbank</code></strong> : <em><code>str &lt;Directory where all the (unlabeled) images are&gt;</code></em>, <em>optional</em></p>
</li>
<li><p><strong><code>tldir</code></strong> : <em><code>str &lt;Directory where 'top losses' info is stored'&gt;</code></em>, <em>optional</em></p>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>When available, the ellipse editor will show model predictions ("top losses") such as segmentations masks (in purple) and ring counts (in yellow), to indicate differences between annotations and the model's predictions.  This can be used to guide the user's attention to annotations that may need revising, and/or as a gauge of the model's performance.
<img src="/espiownage/images/ellipse_editor_screenshot.png" alt="ellipse editor screenshot"></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>ellipse_editor -h
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>usage: ellipse_editor [-h] [--seq] [--files FILES] [--imgbank IMGBANK]
                      [--tldir TLDIR]

optional arguments:
  -h, --help         show this help message and exit
  --seq              Ignore top-loss ordering and do sequential ordering
                     (default: False)
  --files FILES      Wildcard name for all CSV files to edit (default:
                     annotations/*.csv)
  --imgbank IMGBANK  Directory where all the (unlabeled) images are (default:
                     images/)
  --tldir TLDIR      Directory where &#39;top losses&#39; info is stored&#39; (default:
                     top_losses/)
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Examples:</strong></p>
<div class="highlight"><pre><span></span>ellipse_editor --files<span class="o">=</span>annotations_yourlastname/*.csv
</pre></div>
<p>See <code>ellipse_editor -h</code> for command-line options.   You can, for example, edit only one strike's worth of data by running</p>
<div class="highlight"><pre><span></span>ellipse_editor --files<span class="o">=</span>annotations_yourlastname/06241902*.csv
</pre></div>
<p>or a range of annotations, as in <code>ellipse editor --files=annotations_yourlastname/06241902_proc_001*.csv</code></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="gen_masks" class="doc_header"><code>gen_masks</code><a href="https://github.com/drscotthawley/espiownage/tree/master/espiownage/gen_masks.py#L72" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>gen_masks</code>(<strong><code>allone</code></strong>:"All objects get assigned to class 1", <strong><code>quiet</code></strong>:"Suppress output log", <strong><code>cp_ann_imgs</code></strong>:"make directory of only images for which annotations exist (to annotated_images/)", <strong><code>files</code></strong>:"Wildcard name for all CSV files to edit"=<em>`'annotations/</em>.csv'<code>*, **</code>maskdir<code>**:"Directory to write segmentation masks to"=*</code>'masks/'<code>*, **</code>step<code>**:"Step size / resolution / precision of ring count"=*</code>1`*)</p>
</blockquote>
<p>Generate segmentation masks for all annotations</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><p><strong><code>allone</code></strong> : <em><code>&lt;All objects get assigned to class 1&gt;</code></em></p>
</li>
<li><p><strong><code>quiet</code></strong> : <em><code>&lt;Suppress output log&gt;</code></em></p>
</li>
<li><p><strong><code>cp_ann_imgs</code></strong> : <em><code>&lt;make directory of only images for which annotations exist (to annotated_images/)&gt;</code></em></p>
</li>
<li><p><strong><code>files</code></strong> : <em><code>str &lt;Wildcard name for all CSV files to edit&gt;</code></em>, <em>optional</em></p>
</li>
<li><p><strong><code>maskdir</code></strong> : <em><code>str &lt;Directory to write segmentation masks to&gt;</code></em>, <em>optional</em></p>
</li>
<li><p><strong><code>step</code></strong> : <em><code>float &lt;Step size / resolution / precision of ring count&gt;</code></em>, <em>optional</em></p>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>gen_masks -h
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>usage: gen_masks [-h] [--allone] [--cp_ann_imgs] [--files FILES]
                 [--maskdir MASKDIR] [--step STEP]

Generate segmentation masks for all annotations

optional arguments:
  -h, --help         show this help message and exit
  --allone           All objects get assigned to class 1 (default: False)
  --cp_ann_imgs      make directory of only images for which annotations exist
                     (to annotated_images/) (default: False)
  --files FILES      Wildcard name for all CSV files to edit (default:
                     annotations/*.csv)
  --maskdir MASKDIR  Directory to write segmentation masks to (default: masks/)
  --step STEP        Step size / resolution / precision of ring count (default:
                     1)
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="gen_bboxes" class="doc_header"><code>gen_bboxes</code><a href="https://github.com/drscotthawley/espiownage/tree/master/espiownage/gen_bboxes.py#L131" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>gen_bboxes</code>(<strong><code>reg</code></strong>:"Set this for regression model (1 class, no steps)", <strong><code>notallone</code></strong>:"All objects DON'T get assigned to same class: 'AN' for antinode", <strong><code>obpr</code></strong>:"Set this for one box per ring", <strong><code>notquiet</code></strong>:"Don't list every filename created", <strong><code>files</code></strong>:"Wildcard name for all (ellipse) CSV files to read"=<em>`'annotations/</em>.csv'<code>*, **</code>bboxdir<code>**:"Directory to write bboxes to"=*</code>'bboxes'<code>*, **</code>step<code>**:"For classification model: Step size / resolution / precision of ring count"=*</code>1`*)</p>
</blockquote>
<p><strong>Parameters:</strong></p>
<ul>
<li><p><strong><code>reg</code></strong> : <em><code>&lt;Set this for regression model (1 class, no steps)&gt;</code></em></p>
</li>
<li><p><strong><code>notallone</code></strong> : <em><code>&lt;All objects DON'T get assigned to same class: 'AN' for antinode&gt;</code></em></p>
</li>
<li><p><strong><code>obpr</code></strong> : <em><code>&lt;Set this for one box per ring&gt;</code></em></p>
</li>
<li><p><strong><code>notquiet</code></strong> : <em><code>&lt;Don't list every filename created&gt;</code></em></p>
</li>
<li><p><strong><code>files</code></strong> : <em><code>str &lt;Wildcard name for all (ellipse) CSV files to read&gt;</code></em>, <em>optional</em></p>
</li>
<li><p><strong><code>bboxdir</code></strong> : <em><code>str &lt;Directory to write bboxes to&gt;</code></em>, <em>optional</em></p>
</li>
<li><p><strong><code>step</code></strong> : <em><code>float &lt;For classification model: Step size / resolution / precision of ring count&gt;</code></em>, <em>optional</em></p>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>gen_bboxes -h
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>usage: gen_bboxes [-h] [--reg] [--files FILES] [--bboxdir BBOXDIR] [--step STEP]

optional arguments:
  -h, --help         show this help message and exit
  --reg              Set this for regression model (1 class, no steps) (default:
                     False)
  --files FILES      Wildcard name for all (ellipse) CSV files to read (default:
                     annotations/*.csv)
  --bboxdir BBOXDIR  Directory to write bboxes to (default: bboxes)
  --step STEP        For classification model: Step size / resolution /
                     precision of ring count (default: 1)
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="gen_crops" class="doc_header"><code>gen_crops</code><a href="https://github.com/drscotthawley/espiownage/tree/master/espiownage/gen_crops.py#L48" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>gen_crops</code>(<strong><code>files</code></strong>:"Wildcard name for all CSV files to edit"=<em>`'annotations/</em>.csv'<code>*, **</code>outdir<code>**:"Directory to write output cropped images to"=*</code>'crops/'`*)</p>
</blockquote>
<p>Generate cropped images for all annotations</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><p><strong><code>files</code></strong> : <em><code>str &lt;Wildcard name for all CSV files to edit&gt;</code></em>, <em>optional</em></p>
</li>
<li><p><strong><code>outdir</code></strong> : <em><code>str &lt;Directory to write output cropped images to&gt;</code></em>, <em>optional</em></p>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>gen_crops -h
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>usage: gen_crops [-h] [--files FILES] [--outdir OUTDIR]

Generate cropped images for all annotations

optional arguments:
  -h, --help       show this help message and exit
  --files FILES    Wildcard name for all CSV files to edit (default:
                   annotations/*.csv)
  --outdir OUTDIR  Directory to write output cropped images to (default: crops/)
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="grab_recent" class="doc_header"><code>grab_recent</code><a href="https://github.com/drscotthawley/espiownage/tree/master/espiownage/grab_recent.py#L18" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>grab_recent</code>(<strong><code>dirs</code></strong>:"annotation directories check"=<em>`'annotations</em>'<code>*, **</code>dest<code>**:"Directory to write new annotations to"=*</code>'recent_annotations'`*)</p>
</blockquote>
<p><strong>Parameters:</strong></p>
<ul>
<li><p><strong><code>dirs</code></strong> : <em><code>str &lt;annotation directories check&gt;</code></em>, <em>optional</em></p>
</li>
<li><p><strong><code>dest</code></strong> : <em><code>str &lt;Directory to write new annotations to&gt;</code></em>, <em>optional</em></p>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>grab_recent -h
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>usage: grab_recent [-h] [--dirs DIRS] [--dest DEST]

optional arguments:
  -h, --help   show this help message and exit
  --dirs DIRS  annotation directories check (default: annotations*)
  --dest DEST  Directory to write new annotations to (default:
               recent_annotations)
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="gen_fake" class="doc_header"><code>gen_fake</code><a href="https://github.com/drscotthawley/espiownage/tree/master/espiownage/gen_fake.py#L262" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>gen_fake</code>(<strong><code>n</code></strong>:"Number of images to generate"=<em><code>2000</code></em>, <strong><code>outdir</code></strong>:"Directory to write to"=<em><code>'espiownage-fake'</code></em>)</p>
</blockquote>
<p>Generates fake ESPI-like images</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><p><strong><code>n</code></strong> : <em><code>int &lt;Number of images to generate&gt;</code></em>, <em>optional</em></p>
</li>
<li><p><strong><code>outdir</code></strong> : <em><code>str &lt;Directory to write to&gt;</code></em>, <em>optional</em></p>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>gen_fake -h
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>usage: gen_fake [-h] [--n N] [--outdir OUTDIR]

Generates fake ESPI-like images

optional arguments:
  -h, --help       show this help message and exit
  --n N            Number of images to generate (default: 2000)
  --outdir OUTDIR  Directory to write to (default: espiownage-fake)
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>--Scott H. Hawley, September 2021</p>

</div>
</div>
</div>
</div>
 

