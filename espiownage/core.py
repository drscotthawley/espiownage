# AUTOGENERATED! DO NOT EDIT! File to edit: 00_core.ipynb (unless otherwise specified).

__all__ = ['fix_abangle', 'draw_ellipse']

# Cell
import cv2
import numpy as np

# Cell
def fix_abangle(a,b,angle):
    "Makes sure semimajor axis > semiminor axis, and angles are consistent"
    if b > a:
        a, b, angle = b, a, angle+90
    if angle < 0: angle += 180
    elif angle >= 180: angle -= 180
    return a, b, angle

# Cell
def draw_ellipse(
    img,     # a cv2 image, not a PIL image?
    center, axes, angle,
    startAngle=0, endAngle=360, color=(0) ,
    thickness=2, lineType=cv2.LINE_AA, shift=10, filled=False):
    """"Draws an ellipse into image.
    startAngle & endAngle should are arc-angles. They should stay at 0 & 360 for full ellipses.
    """
    center = [int(round(x* 2**shift)) for x in center]
    axes = [int(round(x* 2**shift)) for x in axes]
    thickness = -1 if filled else thickness
    ellipse = cv2.ellipse(
        img, center, axes, -angle,   # -angle because the web interface is "upside down"
        startAngle, endAngle, color,
        thickness, lineType, shift)
    return ellipse